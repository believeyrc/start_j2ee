package com.xuyuan.ssh.common.hibernate;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import com.xuyuan.ssh.dao.base.UserDao;import com.xuyuan.ssh.entity.base.Role;import com.xuyuan.ssh.entity.base.User;import com.xuyuan.ssh.service.base.RoleManager;import com.xuyuan.ssh.service.base.UserManager;public class HibernateDaoTest {	private static UserManager userManager;	private static RoleManager roleManager;	private static UserDao userDao;		@Before	public void setUp() throws Exception {		ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext_ssh.xml");		userManager = (UserManager)context.getBean("userManager");		roleManager = (RoleManager)context.getBean("roleManager");		userDao = (UserDao)context.getBean("userDao");	}	// NullPointerException: getSession() 要么以userManager操作，要么以userDao操作，不能直接使用HibernateDao	public void testAddUser(){		HibernateDao<User> dao = new HibernateDao<User>();		User user = new User();		user.setId(1001);		user.setUsername("test100");		user.setPassword("test100");		dao.saveOrUpdate(user);		System.err.println("usr:" + user.getUsername() + ";pwd:" + user.getPassword());	}	// NullPointerException: getSession()	public void testGetUserByHibernateDao(){		HibernateDao<User> dao = new HibernateDao<User>();		User user = dao.get(1);		System.err.println("usr:" + user.getUsername() + ";pwd:" + user.getPassword());	}		@Test	public void testAddUserByUserDao(){		User user = new User();		//user.setId(13); //添加时不需要指定ID，否则报错：org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1		user.setUsername("test100");		user.setPassword("test100");		userDao.saveOrUpdate(user);		System.err.println("usr:" + user.getUsername() + ";pwd:" + user.getPassword());	}	@Test	public void testUpdateUserByUserDao(){		User user = new User();		user.setId(12);		user.setUsername("test1002");		user.setPassword("test1002");		userDao.saveOrUpdate(user);		System.err.println("usr:" + user.getUsername() + ";pwd:" + user.getPassword());	}		@Test	public void testGetUserByUserDao(){		User user = userDao.get(1);		System.err.println("usr:" + user.getUsername() + ";pwd:" + user.getPassword());	}		@Test	public void testGetUser(){		User user = userManager.getUser(1);		System.err.println("usr:" + user.getUsername() + ";pwd:" + user.getPassword());	}		@Test	public void testGetRole(){		Role role = roleManager.getRole(1);		System.err.println("role:" + role.getName());	}}