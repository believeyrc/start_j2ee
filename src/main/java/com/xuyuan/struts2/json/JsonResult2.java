package com.xuyuan.struts2.json;import java.io.PrintWriter;import javax.servlet.http.HttpServletResponse;import net.sf.json.JSONObject;import org.apache.struts2.dispatcher.StrutsResultSupport;import com.opensymphony.xwork2.ActionInvocation;/** * 自定义JSON返回类型 */public class JsonResult2 extends StrutsResultSupport {	/**	 * @uml.property  name="contentTypeName"	 */	private String contentTypeName;	/**	 * @uml.property  name="jsonObjName"	 */	private String jsonObjName = "";	/**	 * @param contentTypeName	 * @uml.property  name="contentTypeName"	 */	public void setContentTypeName(String contentTypeName) {		this.contentTypeName = contentTypeName;	}	/**	 * @param jsonObjName	 * @uml.property  name="jsonObjName"	 */	public void setJsonObjName(String jsonObjName) {		this.jsonObjName = jsonObjName;	}	@Override	protected void doExecute(String finalLocation, ActionInvocation invocation) throws Exception {		HttpServletResponse response = (HttpServletResponse) invocation.getInvocationContext().get(HTTP_RESPONSE);		String contentType = conditionalParse(contentTypeName, invocation);		if (contentType == null) contentType = "text/json;charset=UTF-8";		response.setContentType(contentType);		response.setHeader("Cache-Control","no-cache");		response.setCharacterEncoding("UTF-8");				String jsonString = (String) invocation.getStack().findValue(jsonObjName);				PrintWriter out = response.getWriter();		out.write(jsonString);		out.flush();		out.close();	}}