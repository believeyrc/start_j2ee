package com.xuyuan.pager_ftl.service.hibernate;import org.springframework.orm.hibernate3.HibernateTemplate;import com.opensymphony.xwork2.ActionContext;import com.opensymphony.xwork2.util.ValueStack;import com.xuyuan.pager_ftl.dao.hibernate.PagingListHt;/** * 业务类使用HibernateTemplate,业务类访问Dao层的方法,通过new出PagingListHt构造函数对象, * 所以PagingListHt并不需要注入SessionFactory.(通常的做法是PagingListHt->BaseDaoSupport,然后在Spring配置文件中给BaseDaoSupport注入SessionFactory) *  * 业务类依赖HibernateTemplate对象,而HibernateTemplate对象依赖SessionFactory.从而完成事务的控制.(见Spring配置文件分页3) * @author Administrator * */public class BaseService {		private HibernateTemplate hibernateTemplate;		public void setHibernateTemplate(HibernateTemplate hibernateTemplate) {		this.hibernateTemplate = hibernateTemplate;	}	/**	 * 获取ValueStack	 */	public ValueStack getValueStack() {		return ActionContext.getContext().getValueStack();	}		/**	 * 获取分页的List	 */	public PagingListHt getPagingListHt(String hql) {		int pageNum = ((Integer) getValueStack().findValue("pageNum")).intValue();		int pageSize = ((Integer) getValueStack().findValue("pageSize")).intValue();		return new PagingListHt(hibernateTemplate,pageNum, pageSize, hql);	}		public PagingListHt getPagingListHt(String hql, Class clazz) {		int pageNum = ((Integer) getValueStack().findValue("pageNum")).intValue();		int pageSize = ((Integer) getValueStack().findValue("pageSize")).intValue();		return new PagingListHt(hibernateTemplate,pageNum, pageSize, hql, clazz);	}		/**	 * 获取分页的List，预编译HQL语句	 */	public PagingListHt getPagingListHt(String hql, Object[] parameters) {		int pageNum = ((Integer) getValueStack().findValue("pageNum")).intValue();		int pageSize = ((Integer) getValueStack().findValue("pageSize")).intValue();		return new PagingListHt(hibernateTemplate,pageNum, pageSize, hql, parameters);	}		public PagingListHt getPagingListHt(String hql, Object[] parameters, Class clazz) {		int pageNum = ((Integer) getValueStack().findValue("pageNum")).intValue();		int pageSize = ((Integer) getValueStack().findValue("pageSize")).intValue();		return new PagingListHt(hibernateTemplate,pageNum, pageSize, hql, parameters, clazz);	}}