package com.xuyuan.chart.jfreechart;import java.awt.BasicStroke;import java.awt.Color;import java.awt.Font;import java.io.FileOutputStream;import java.io.IOException;import java.text.DecimalFormat;import java.text.SimpleDateFormat;import java.util.TimeZone;import org.jfree.chart.ChartFactory;import org.jfree.chart.ChartUtilities;import org.jfree.chart.JFreeChart;import org.jfree.chart.axis.CategoryAnchor;import org.jfree.chart.axis.CategoryAxis;import org.jfree.chart.axis.NumberAxis;import org.jfree.chart.axis.PeriodAxis;import org.jfree.chart.axis.PeriodAxisLabelInfo;import org.jfree.chart.labels.ItemLabelAnchor;import org.jfree.chart.labels.ItemLabelPosition;import org.jfree.chart.labels.StandardCategoryItemLabelGenerator;import org.jfree.chart.labels.StandardCategoryToolTipGenerator;import org.jfree.chart.labels.StandardXYItemLabelGenerator;import org.jfree.chart.labels.StandardXYToolTipGenerator;import org.jfree.chart.plot.CategoryPlot;import org.jfree.chart.plot.DatasetRenderingOrder;import org.jfree.chart.plot.PlotOrientation;import org.jfree.chart.plot.XYPlot;import org.jfree.chart.renderer.category.GroupedStackedBarRenderer;import org.jfree.chart.renderer.category.LineAndShapeRenderer;import org.jfree.chart.renderer.xy.StackedXYBarRenderer;import org.jfree.chart.renderer.xy.XYStepRenderer;import org.jfree.data.KeyToGroupMap;import org.jfree.data.category.CategoryDataset;import org.jfree.data.category.DefaultCategoryDataset;import org.jfree.data.general.DefaultPieDataset;import org.jfree.data.time.Month;import org.jfree.data.time.TimeTableXYDataset;import org.jfree.data.time.Year;import org.jfree.data.xy.XYDataset;import org.jfree.ui.RectangleInsets;import org.jfree.ui.TextAnchor;public class XYChart {	public static void main(String[] args) {		XYChart chart = new XYChart();		chart.createXYBarDemo("xybar.jpg");	}	// 创建XYBar	public void createXYBarDemo(String jpgname) {		TimeTableXYDataset dataset = this.getXYDataset();		PeriodAxis periodaxis = new PeriodAxis("时间");// 设置X坐标轴		periodaxis.setTimeZone(TimeZone.getTimeZone("Pacific/Auckland"));		periodaxis.setAutoRangeTimePeriodClass(Month.class);		periodaxis.setMajorTickTimePeriodClass(Month.class);		PeriodAxisLabelInfo aperiodaxislabelinfo[] = new PeriodAxisLabelInfo[2];		aperiodaxislabelinfo[0] = new PeriodAxisLabelInfo(Month.class, new SimpleDateFormat("MMM"), new RectangleInsets(2D, 2D, 2D, 2D), new Font("SansSerif", 1,10), Color.BLACK, false, new BasicStroke(0.0F),Color.lightGray);		aperiodaxislabelinfo[1] = new PeriodAxisLabelInfo(Year.class, new SimpleDateFormat("yyyy"));		periodaxis.setLabelInfo(aperiodaxislabelinfo);		periodaxis.setLowerMargin(0.01D);		periodaxis.setUpperMargin(0.01D);		NumberAxis numberaxis = new NumberAxis("登入次数");// 设置Y坐标轴		numberaxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());		numberaxis.setUpperMargin(0.10000000000000001D);		numberaxis.setRange(0, 20000);		StackedXYBarRenderer stackedxybarrenderer = new StackedXYBarRenderer(0.14999999999999999D);// 设置Renderer		stackedxybarrenderer.setDrawBarOutline(true);		stackedxybarrenderer.setBaseItemLabelsVisible(false);		stackedxybarrenderer.setBaseItemLabelGenerator(new StandardXYItemLabelGenerator());		stackedxybarrenderer.setBasePositiveItemLabelPosition(new ItemLabelPosition(ItemLabelAnchor.OUTSIDE12, TextAnchor.BOTTOM_CENTER));		stackedxybarrenderer.setBaseToolTipGenerator(new StandardXYToolTipGenerator("{0} : {1} = {2}", new SimpleDateFormat("yyyy"),new DecimalFormat("0")));		stackedxybarrenderer.setMargin(0.2);		stackedxybarrenderer.setSeriesPaint(0, new Color(0, 11, 220));		stackedxybarrenderer.setSeriesPaint(1, new Color(51, 129, 50));		stackedxybarrenderer.setSeriesPaint(2, new Color(255, 0, 0));		XYPlot plot = new XYPlot(dataset, periodaxis, numberaxis, stackedxybarrenderer);// 数据集,X轴,Y轴,renderer		plot.setRangeGridlinesVisible(true);		plot.setDomainGridlinesVisible(false);		JFreeChart chart = new JFreeChart("工作量统计", plot);		XYPlot xyplot1 = (XYPlot) chart.getPlot();		XYStepRenderer xysteprenderer1 = new XYStepRenderer();		xysteprenderer1.setBaseShapesVisible(true);		xysteprenderer1.setSeriesStroke(0, new BasicStroke(1F));		xysteprenderer1.setSeriesPaint(0, new Color(255, 0, 0));		// xysteprenderer1.setBaseToolTipGenerator(new		// StandardXYToolTipGenerator());		// xysteprenderer1.setDefaultEntityRadius(6);		xyplot1.setDataset(1, getXYDatasetLevel1());		xyplot1.setRenderer(1, xysteprenderer1);		XYStepRenderer xysteprenderer2 = new XYStepRenderer();		xysteprenderer2.setBaseShapesVisible(true);		xysteprenderer2.setSeriesStroke(0, new BasicStroke(2.0F));		xysteprenderer2.setSeriesPaint(0, Color.yellow);		xyplot1.setDataset(2, getXYDatasetLevel2());		xyplot1.setRenderer(2, xysteprenderer2);		this.savejpg(chart, jpgname);	}	private TimeTableXYDataset getXYDataset() {		TimeTableXYDataset dataset = new TimeTableXYDataset();		dataset.add(new Month(1, 2005), 8000, "已完");		dataset.add(new Month(1, 2005), 2000, "未完");		dataset.add(new Month(2, 2005), 8000, "未完");		return dataset;	}	private XYDataset getXYDatasetLevel1() {		TimeTableXYDataset ttd1 = new TimeTableXYDataset();// 目标		ttd1.add(new Month(1, 2005), 8000, "目标");		ttd1.add(new Month(2, 2005), 9000, "目标");		ttd1.add(new Month(3, 2005), 10000, "目标");		return ttd1;	}	private XYDataset getXYDatasetLevel2() {		TimeTableXYDataset ttd2 = new TimeTableXYDataset();// 分布		ttd2.add(new Month(1, 2005), 2000, "分布");		ttd2.add(new Month(2, 2005), 2000, "分布");		return ttd2;	}	// 保存为本地图片	private void savejpg(JFreeChart chart, String jpgname) {		FileOutputStream jpg = null;		try {			jpg = new FileOutputStream(jpgname);			ChartUtilities.writeChartAsJPEG(jpg, 0.5f, chart, 800, 500, null);		} catch (Exception e) {			e.printStackTrace();		} finally {			try {				jpg.close();			} catch (IOException e) {				e.printStackTrace();			}		}	}}