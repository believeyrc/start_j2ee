package com.xuyuan.chart.fusionchart.action;import java.util.HashMap;import java.util.List;import java.util.Map;import org.dom4j.Element;import com.xuyuan.chart.fusionchart.dao.BrowserDao;import com.xuyuan.util.dom4j.XMLUtil;/** * 使用Fusion Charts制作报表（dom4j生成XML） * @author http://sarin.iteye.com/blog/711494 * */public class FusionChartAction{		private String xmlStr;		//@Resource(name="browserDao")	private BrowserDao browserDao;		public String chart() throws Exception {		XMLUtil xml = new XMLUtil();		Element graph = xml.addRoot("graph");		xml.addAttribute(graph, "caption", "访问统计");		xml.addAttribute(graph, "subCaption", "浏览器类型统计");		xml.addAttribute(graph, "basefontsize", "12");		xml.addAttribute(graph, "xAxisName", "浏览器类型");		xml.addAttribute(graph, "decimalPrecision", "0");	// 小数精确度，0为精确到个位		xml.addAttribute(graph, "showValues", "0");			// 在报表上不显示数值				List browserList = browserDao.getBrowserStat();		for (int i = 0; i < browserList.size(); i++) {			Map item = (HashMap) browserList.get(i);			Element set = xml.addNode(graph, "set");			set.addAttribute("name", (String) item.get("statVar"));			set.addAttribute("value", item.get("statCount").toString());			set.addAttribute("color", Integer.toHexString((int) (Math.random() * 255 * 255 * 255)).toUpperCase());		}		xmlStr = xml.getXML();		System.out.println(xmlStr);		return "chart";	}		public String getXmlStr() {		return xmlStr;	}	public void setBrowserDao(BrowserDao browserDao) {		this.browserDao = browserDao;	}	}