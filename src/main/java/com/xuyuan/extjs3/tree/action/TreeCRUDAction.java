package com.xuyuan.extjs3.tree.action;import org.apache.struts2.ServletActionContext;import com.xuyuan.extjs3.tree.bean.Exttree;import com.xuyuan.extjs3.tree.service.TreeService;/** * S2SH整合构建Ext动态树(带右键菜单操作) * * 基于Ext的TreeNode实现的tree有两种方式加载：一种是同步树，即生成完整的tree。 * 另外一种是异步树，即点击父节点时才生成子节点。 * 对于节点过多的树，推荐使用异步方式加载树节点； * 对于节点较少的树，可以使用同步方式加载树节点，即完整生成树节点。 * * *****Ext Tree CRUD DEMO:***** *   和TreeDemoAction共用Service,Dao. TreeDemoAction仅仅简单地从数据库中获取数据,展示出树而已.此例多了对树节点的CRUD操作. * http://localhost:8888/start_j2ee/extjs3/tree/tree_crud.jsp 不需要DWR * http://localhost:8888/start_j2ee/extjs3/tree_crud/console-index.jsp 使用DWR * * @author http://www.cnblogs.com/BruceLeey/archive/2009/06/06/1497851.html * @author http://seraph115.iteye.com/blog/247055	http://seraph115.iteye.com/blog/246924 * @keyword extjs 动态树/异步加载树 * */public class TreeCRUDAction {	private Exttree extTree;    private TreeService service;    /**     * 异步获取数据     */    public String jsonData() throws Exception {        ServletActionContext.getRequest().setAttribute("list",        		service.findChildById(Long.valueOf(ServletActionContext.getRequest().getParameter("id"))));        return "JSON";    }    /**     * 添加节点     */    public String saveNode() throws Exception {        if (!"".equals(extTree.getId()) && null != extTree.getId()) {            if (service.findById(extTree.getId()) == null) {                return "ERROR";            } else {                service.modify(extTree);                return "SUCCESS";            }        }        service.save(extTree);        return "SUCCESS";    }    /**     * 修改节点     */    public String modifyNode() throws Exception {        if (null != extTree.getId()) {            ServletActionContext.getRequest().setAttribute("obj",service.findById(extTree.getId()));        } else {            ServletActionContext.getRequest().setAttribute("obj", extTree);        }        return "EDIT";    }	public TreeService getService() {		return service;	}	public void setService(TreeService service) {		this.service = service;	}	public Exttree getExtTree() {        return extTree;    }    public void setExtTree(Exttree extTree) {        this.extTree = extTree;    }}