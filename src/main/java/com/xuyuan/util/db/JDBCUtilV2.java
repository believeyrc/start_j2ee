package com.xuyuan.util.db;import java.sql.Connection;import java.sql.DriverManager;import java.sql.ResultSet;import java.sql.SQLException;import java.sql.Statement;import java.util.Properties;/** * 数据库连接池,单例模式 * 调用DBPoolManager.getInstance(),返回连接池管理对象的实例 * @author Administrator * */public class JDBCUtilV2 {	private static JDBCUtilV2 dbManager = null;	private static int clientCount;	private static Connection conn = null;	private static Statement stmt = null;	private static ResultSet rs = null;	private static String driver = "";	private static String url = "";	private static String username = "";	private static String password = "";	static {		getInstance();	}		public static JDBCUtilV2 getInstance() {		if (dbManager == null) {			dbManager = new JDBCUtilV2();		}		clientCount++;	// 创建了一次就计数累加一次。		System.out.println("CURRENT CLIENT COUNT:" + clientCount);		return dbManager;	}		public static Connection getConn(){		return conn;	}	private JDBCUtilV2() {		init();	// 构造函数中进行初始化操作	}	private void init() {		//load jdbc properties file		try {			Properties pros = new Properties();			pros.load(this.getClass().getResourceAsStream("/application.properties"));			driver = pros.getProperty("jdbc.driver");			url = pros.getProperty("jdbc.url");			username = pros.getProperty("jdbc.username");			password = pros.getProperty("jdbc.password");		} catch (Exception e) {			e.printStackTrace();		}		//load driver and create connection		try {			Class.forName(driver);			conn = DriverManager.getConnection(url, username, password);			System.out.println("connect success....");		} catch (ClassNotFoundException e) {			e.printStackTrace();		} catch (SQLException e) {			e.printStackTrace();		}	}	public static ResultSet query(String sql){		try {			stmt = conn.createStatement();			rs = stmt.executeQuery(sql);		} catch (SQLException e) {			e.printStackTrace();		}		return rs;	}	public static void main(String[] args) throws Exception {//		JDBCUtilV2.getInstance();//		JDBCUtilV2.getInstance();//		JDBCUtilV2.getInstance();        rs = query("select book_id,book_name from books where book_name like '%book%' limit 10");        while(rs.next()){        	System.out.print("id:" + rs.getInt(1) + " name:" + rs.getString(2) + "\n");        }	}}