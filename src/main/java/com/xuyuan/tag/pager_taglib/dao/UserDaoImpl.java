package com.xuyuan.tag.pager_taglib.dao;import java.util.List;import org.hibernate.Query;import org.springframework.orm.hibernate3.support.HibernateDaoSupport;import com.xuyuan.ssh.entity.base.User;import com.xuyuan.tag.pager_taglib.PageModel;public class UserDaoImpl extends HibernateDaoSupport {	/**	 * 内存分页	 */	public List<User> findAllUser(){		return getSession().createQuery("from User").list(); 	}		/**	 * list+total=>数据库分页	 */	public int findAllUserCount() {		String queryCountHql = "select count(*) from User";		Query query = getSession().createQuery(queryCountHql);		return ((Long)query.uniqueResult()).intValue();	}	public List<User> findAllUser1(int offset, int pageSize) {		return getSession().createQuery("from User").setFirstResult(offset).setMaxResults(pageSize).list();	}		/**	 * 分页查询用户	 * @param offset  从第几条记录开始查询	 * @param pagesize  每页显示多少条记录	 * @return	 * 这个函数可以看做是上面2个函数的集合.对list和total进行了封装	 */	public PageModel findAllUser(int offset, int pagesize) {		//得到总记录数		String queryCountHql = "select count(*) from User";		Query query = getSession().createQuery(queryCountHql);		int total = ((Long)query.uniqueResult()).intValue();				//得到当前页的用户列表		List datas = getSession().createQuery("from User")					.setFirstResult(offset)					.setMaxResults(pagesize)					.list();				//得到结果集:将总记录数和当前页记录封装在PageModel中		PageModel pm = new PageModel();		pm.setTotal(total);		pm.setData(datas);				return pm;	}}